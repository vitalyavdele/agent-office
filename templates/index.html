<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agent Office</title>
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<style>
  body { background:#0b0b14; }
  .md-content { color:#b0b8d0; font-size:13px; line-height:1.75; }
  .md-content strong { color:#e2e8f0; font-weight:700; }
  .md-content h1,.md-content h2,.md-content h3 { color:#e2e8f0; font-weight:700; margin:10px 0 4px; }
  .md-content h1 { font-size:16px; } .md-content h2 { font-size:14px; } .md-content h3 { font-size:13px; }
  .md-content p { margin-bottom:8px; }
  .md-content ul,.md-content ol { padding-left:18px; margin-bottom:8px; }
  .md-content li { margin-bottom:3px; }
  .md-content code { background:#1e1e32; color:#c4b5fd; padding:2px 5px; border-radius:4px; font-size:11px; font-family:monospace; }
  .md-content pre { background:#06060e; border:1px solid #1e1e32; border-radius:10px; padding:12px 14px; margin:8px 0; overflow-x:auto; }
  .md-content pre code { background:none; padding:0; color:#a8b8d0; font-size:11.5px; }
  .md-content blockquote { border-left:3px solid #6d28d9; padding-left:12px; color:#888aaa; margin:6px 0; }
  .md-content hr { border:none; border-top:1px solid #1e1e32; margin:10px 0; }
  .md-content table { width:100%; border-collapse:collapse; font-size:12px; }
  .md-content th,.md-content td { padding:6px 10px; border-bottom:1px solid #1e1e32; text-align:left; }
  .md-content th { background:#111120; color:#e2e8f0; font-weight:700; }
  @keyframes bob   { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }
  @keyframes think { 0%,100%{transform:rotate(-5deg)} 50%{transform:rotate(5deg)} }
  @keyframes work  { from{transform:translateX(-2px) rotate(-2deg)} to{transform:translateX(2px) rotate(2deg)} }
  .anim-bob   { animation:bob   3.5s ease-in-out infinite; }
  .anim-think { animation:think 1.8s ease-in-out infinite; }
  .anim-work  { animation:work  .25s ease-in-out infinite alternate; }
  ::-webkit-scrollbar { width:3px; height:3px; }
  ::-webkit-scrollbar-thumb { background:#1e1e32; border-radius:2px; }
  ::-webkit-scrollbar-track { background:transparent; }
</style>
</head>
<body class="h-screen flex overflow-hidden text-slate-200" x-data="app()" x-init="init()">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SIDEBAR ‚Äî contacts list
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<aside class="w-[260px] flex-shrink-0 flex flex-col bg-[#0d0d1a] border-r border-[#181828]">

  <!-- Logo bar -->
  <div class="h-14 flex items-center justify-between px-4 border-b border-[#181828] flex-shrink-0">
    <div class="flex items-center gap-2.5">
      <div class="w-8 h-8 rounded-xl bg-gradient-to-br from-violet-600 to-violet-400 flex items-center justify-center text-sm font-black shadow-lg shadow-violet-500/30">‚ú¶</div>
      <span class="font-bold text-sm tracking-tight">Agent Office</span>
    </div>
    <div class="flex items-center gap-1.5">
      <div :class="wsLive ? 'bg-emerald-400 animate-pulse' : 'bg-red-500'" class="w-2 h-2 rounded-full"></div>
      <span class="text-[10px] font-bold" :class="wsLive ? 'text-emerald-500' : 'text-red-500'" x-text="wsLive ? 'LIVE' : 'OFF'"></span>
    </div>
  </div>

  <!-- New task button -->
  <div class="px-3 py-2.5 border-b border-[#181828] flex-shrink-0">
    <button @click="focusInput()"
            class="w-full flex items-center gap-2 bg-violet-600/12 hover:bg-violet-600/22 border border-violet-500/22 rounded-xl px-3.5 py-2.5 text-[13px] text-violet-300 transition-all">
      <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
      <span>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</span>
    </button>
  </div>

  <!-- Contacts scroll area -->
  <div class="flex-1 overflow-y-auto">

    <!-- –ö–û–ú–ê–ù–î–ê section -->
    <div class="px-4 pt-4 pb-1.5">
      <span class="text-[9px] font-black tracking-[1.5px] uppercase text-slate-700">–ö–æ–º–∞–Ω–¥–∞</span>
    </div>

    <!-- "All messages" contact -->
    <button @click="activeAgent = null"
            :class="activeAgent === null
              ? 'bg-[#111120] border-[#252540]'
              : 'border-transparent hover:bg-[#0f0f1b]'"
            class="w-full flex items-center gap-3 px-3 py-2.5 mx-1.5 rounded-2xl border transition-all mb-0.5 text-left" style="width:calc(100% - 12px)">
      <div class="w-10 h-10 rounded-full bg-[#1a1a2e] flex items-center justify-center text-[18px] flex-shrink-0">üìã</div>
      <div class="flex-1 min-w-0">
        <div class="text-[13px] font-semibold text-slate-200">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
        <div class="text-[11px] text-slate-600 truncate"
             x-text="messages.length > 0 ? lastMsgPreview(null) : '–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π'"></div>
      </div>
      <div x-show="messages.length > 0" class="text-[10px] text-slate-700 flex-shrink-0 tabular-nums" x-text="lastMsgTime(null)"></div>
    </button>

    <!-- Agent contacts -->
    <template x-for="a in agents" :key="a.key">
      <button @click="activeAgent = a.key"
              :class="activeAgent === a.key
                ? 'bg-[#111120] border-[#252540]'
                : 'border-transparent hover:bg-[#0f0f1b]'"
              class="w-full flex items-center gap-3 px-3 py-2.5 mx-1.5 rounded-2xl border transition-all mb-0.5 text-left" style="width:calc(100% - 12px)">
        <!-- Avatar with status ring -->
        <div class="relative flex-shrink-0">
          <div class="w-10 h-10 rounded-full flex items-center justify-center overflow-hidden"
               :style="`background:${AGENTS[a.key]?.color||'#888'}1a; box-shadow: 0 0 0 2px ${a.status!=='idle' ? (AGENTS[a.key]?.color||'#888')+'40' : 'transparent'}`">
            <span :class="{
                    'anim-bob':   a.status==='idle',
                    'anim-think': a.status==='thinking',
                    'anim-work':  a.status==='working',
                  }"
                  class="text-[20px] leading-none"
                  x-text="AGENTS[a.key]?.emoji||'ü§ñ'"></span>
          </div>
          <!-- Status dot -->
          <div :class="{
                 'bg-emerald-400': a.status==='working' || a.status==='done',
                 'bg-violet-400':  a.status==='thinking',
                 'bg-slate-700':   a.status==='idle',
               }"
               :style="a.status==='thinking' ? 'animation:pulse 1s ease-in-out infinite' : ''"
               class="absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-[#0d0d1a] transition-colors duration-300"></div>
        </div>

        <!-- Name + last message -->
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-1.5 mb-0.5">
            <span class="text-[13px] font-semibold text-slate-200 truncate" x-text="AGENTS[a.key]?.name"></span>
            <span x-show="a.status !== 'idle'"
                  :class="{
                    'text-violet-400 bg-violet-400/12': a.status==='thinking',
                    'text-emerald-400 bg-emerald-400/12': a.status==='working'||a.status==='done',
                  }"
                  class="text-[8px] font-black tracking-wider uppercase px-1.5 py-[2px] rounded-full flex-shrink-0"
                  x-text="STATUS_RU[a.status]||''"></span>
          </div>
          <div class="text-[11px] text-slate-600 truncate"
               x-text="lastMsgPreview(a.key) || (a.status!=='idle' && a.task ? a.task : AGENTS[a.key]?.role||'')"></div>
        </div>

        <!-- Time -->
        <div x-show="lastMsgTime(a.key)" class="text-[10px] text-slate-700 flex-shrink-0 tabular-nums" x-text="lastMsgTime(a.key)"></div>
      </button>
    </template>

    <!-- –ó–ê–î–ê–ß–ò section -->
    <div class="px-4 pt-4 pb-1.5 mt-1">
      <span class="text-[9px] font-black tracking-[1.5px] uppercase text-slate-700">–ó–∞–¥–∞—á–∏</span>
    </div>

    <!-- Task cards -->
    <template x-for="t in allTasks.slice(0, 6)" :key="t.id">
      <div class="mx-2 mb-1.5 rounded-xl bg-[#0f0f1a] border border-[#181828] px-3 py-2.5 hover:border-[#222236] transition-colors cursor-default">
        <div class="flex items-start gap-2">
          <div class="mt-[3px] flex-shrink-0">
            <div :class="{
                   'bg-yellow-400': t.status==='pending',
                   'bg-violet-400 animate-pulse': t.status==='processing',
                   'bg-emerald-400': t.status==='done',
                 }" class="w-1.5 h-1.5 rounded-full"></div>
          </div>
          <span class="text-[11.5px] text-slate-300 leading-snug" x-text="(t.content||'').slice(0,55)+((t.content||'').length>55?'‚Ä¶':'')"></span>
        </div>
        <div class="text-[10px] text-slate-700 mt-1 pl-3.5" x-text="fmtDate(t.created_at)"></div>
      </div>
    </template>
    <div x-show="allTasks.length===0" class="px-4 py-2 text-[11px] text-slate-800">–ó–∞–¥–∞—á –Ω–µ—Ç</div>

    <!-- Clock at bottom -->
    <div class="px-4 pb-4 pt-3 text-[10px] font-mono tabular-nums text-slate-800 text-center" x-text="clock"></div>
  </div>
</aside>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     CHAT AREA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="flex-1 flex flex-col overflow-hidden bg-[#0b0b14]">

  <!-- Chat header -->
  <div class="h-14 flex-shrink-0 flex items-center gap-3 px-5 bg-[#0d0d1a] border-b border-[#181828]">

    <!-- ALL header -->
    <template x-if="activeAgent === null">
      <div class="flex items-center gap-3 flex-1 min-w-0">
        <div class="w-9 h-9 rounded-full bg-[#1a1a2e] flex items-center justify-center text-base flex-shrink-0">üìã</div>
        <div class="min-w-0">
          <div class="font-bold text-[14px]">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
          <div class="text-[11px] text-slate-600" x-text="messages.length + ' —Å–æ–æ–±—â–µ–Ω–∏–π ¬∑ ' + agents.filter(a=>a.status!=='idle').length + ' –∞–≥–µ–Ω—Ç–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ'"></div>
        </div>
      </div>
    </template>

    <!-- Single agent header -->
    <template x-if="activeAgent !== null">
      <div class="flex items-center gap-3 flex-1 min-w-0">
        <div class="w-9 h-9 rounded-full flex items-center justify-center text-[18px] relative flex-shrink-0"
             :style="`background:${AGENTS[activeAgent]?.color||'#888'}1a`">
          <span :class="{
                  'anim-bob':   activeAgentObj?.status==='idle',
                  'anim-think': activeAgentObj?.status==='thinking',
                  'anim-work':  activeAgentObj?.status==='working',
                }"
                x-text="AGENTS[activeAgent]?.emoji||'ü§ñ'"></span>
        </div>
        <div class="min-w-0">
          <div class="font-bold text-[14px]" x-text="AGENTS[activeAgent]?.name"></div>
          <div class="text-[11px] flex items-center gap-1.5">
            <span class="text-slate-600" x-text="AGENTS[activeAgent]?.role"></span>
            <span class="text-slate-800">¬∑</span>
            <span :class="{
                    'text-violet-400': activeAgentObj?.status==='thinking',
                    'text-emerald-400': activeAgentObj?.status==='working'||activeAgentObj?.status==='done',
                    'text-slate-700': activeAgentObj?.status==='idle',
                  }"
                  x-text="STATUS_RU[activeAgentObj?.status||'idle']"></span>
          </div>
        </div>
        <!-- Active task pill -->
        <div x-show="activeAgentObj?.task && activeAgentObj?.status!=='idle'"
             class="ml-3 hidden sm:block max-w-[280px] truncate text-[11px] text-slate-500 bg-[#111120] border border-[#1e1e32] rounded-full px-3 py-1"
             x-text="activeAgentObj?.task"></div>
      </div>
    </template>
  </div>

  <!-- Tab bar -->
  <div class="flex-shrink-0 flex gap-1 px-4 py-2 bg-[#0d0d1a] border-b border-[#181828]">
    <button @click="activeTab='chat'"
            :class="activeTab==='chat' ? 'bg-violet-600/20 text-violet-300 border-violet-500/30' : 'text-slate-600 border-transparent hover:text-slate-400'"
            class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium border transition-all">
      <span>üí¨</span><span>–ß–∞—Ç</span>
    </button>
    <button @click="activeTab='ideas'; loadIdeas()"
            :class="activeTab==='ideas' ? 'bg-violet-600/20 text-violet-300 border-violet-500/30' : 'text-slate-600 border-transparent hover:text-slate-400'"
            class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[12px] font-medium border transition-all">
      <span>üí°</span><span>–ò–¥–µ–∏</span>
      <span x-show="ideas.filter(i=>i.status==='planned').length > 0"
            class="bg-violet-500 text-white text-[9px] font-bold px-1.5 rounded-full ml-0.5"
            x-text="ideas.filter(i=>i.status==='planned').length"></span>
    </button>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ Chat tab ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div x-show="activeTab==='chat'" class="flex-1 flex flex-col overflow-hidden">

  <!-- Messages feed -->
  <div class="flex-1 overflow-y-auto px-4 py-4 flex flex-col gap-2" x-ref="feed">

    <!-- Empty state -->
    <div x-show="filteredMessages.length === 0"
         class="flex-1 flex flex-col items-center justify-center h-full" style="opacity:.15">
      <div class="text-5xl mb-3">‚ú¶</div>
      <div class="text-[15px] font-bold">
        <span x-show="activeAgent === null">–ö–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ</span>
        <span x-show="activeAgent !== null" x-text="AGENTS[activeAgent]?.name + ' –µ—â—ë –º–æ–ª—á–∏—Ç'"></span>
      </div>
      <div class="text-sm text-slate-400 mt-1">
        <span x-show="activeAgent === null">–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É –Ω–∏–∂–µ ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç –µ—ë –ø–æ –∞–≥–µ–Ω—Ç–∞–º</span>
        <span x-show="activeAgent !== null">–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å, –∫–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç –∑–∞–¥–∞—á—É</span>
      </div>
    </div>

    <template x-for="(msg, idx) in filteredMessages" :key="idx">
      <div>

        <!-- ‚îÄ‚îÄ‚îÄ User message ‚îÄ‚îÄ‚îÄ -->
        <div x-show="msg.role === 'user'" class="flex flex-col items-end gap-1 mb-1">
          <div class="text-[10px] text-slate-700 pr-1">–í—ã ¬∑ <span x-text="msg.time"></span></div>
          <div class="max-w-[58%] bg-gradient-to-br from-violet-600 to-violet-800 text-white rounded-[20px] rounded-tr-[5px] px-4 py-3 text-[13.5px] leading-relaxed shadow-lg shadow-violet-500/15"
               x-text="msg.content"></div>
        </div>

        <!-- ‚îÄ‚îÄ‚îÄ Agent message ‚îÄ‚îÄ‚îÄ -->
        <div x-show="msg.role !== 'user'" class="flex items-start gap-3 mb-1">

          <!-- Avatar ‚Äî shown in "All" view -->
          <div x-show="activeAgent === null"
               class="w-9 h-9 rounded-full flex items-center justify-center text-[17px] flex-shrink-0 mt-0.5"
               :style="`background:${msg.color||AGENTS[msg.role]?.color||'#888'}1a`"
               x-text="msg.emoji||AGENTS[msg.role]?.emoji||'ü§ñ'"></div>

          <!-- Bubble -->
          <div class="flex-1 min-w-0 max-w-[80%]">
            <!-- Sender name + time (All view) -->
            <div x-show="activeAgent === null" class="flex items-center gap-2 mb-1.5">
              <span class="text-[12px] font-bold"
                    :style="`color:${msg.color||AGENTS[msg.role]?.color||'#a78bfa'}`"
                    x-text="msg.name||AGENTS[msg.role]?.name||msg.role"></span>
              <span class="text-[10px] text-slate-700 tabular-nums" x-text="msg.time"></span>
            </div>

            <!-- Card bubble -->
            <div class="bg-[#111120] border border-[#1e1e32] rounded-[18px] rounded-tl-[5px] overflow-hidden"
                 :style="`border-left: 3px solid ${msg.color||AGENTS[msg.role]?.color||'#6d28d9'}55`">
              <!-- Time badge (individual agent view) -->
              <div x-show="activeAgent !== null"
                   class="flex items-center gap-2 px-4 pt-3 pb-0">
                <span class="text-[10px] tabular-nums text-slate-700" x-text="msg.time"></span>
              </div>
              <!-- Content -->
              <div class="px-4 pt-2.5 pb-4">
                <div class="md-content" x-html="renderMd(msg.content)"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </template>
  </div>

  <!-- Input bar -->
  <div class="flex-shrink-0 border-t border-[#181828] bg-[#0d0d1a] px-4 py-3 flex items-end gap-2.5">
    <!-- Mic button -->
    <button @click="toggleMic()" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥"
            :class="micActive
              ? 'bg-red-500/15 border-red-500/35 text-red-400 animate-pulse'
              : 'bg-[#111120] border-[#1e1e32] text-slate-600 hover:text-slate-300 hover:bg-[#161626]'"
            class="w-10 h-10 rounded-full border flex items-center justify-center flex-shrink-0 transition-all">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
        <line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/>
      </svg>
    </button>

    <!-- Text input wrapper -->
    <div class="flex-1 flex items-end gap-2 bg-[#111120] border border-[#1e1e32] rounded-2xl px-4 py-2.5 transition-all focus-within:border-violet-500/40 focus-within:ring-1 focus-within:ring-violet-500/10">
      <textarea x-ref="ta" x-model="inputText"
                @keydown.ctrl.enter.prevent="sendTask()"
                @input="resizeTA()" rows="1"
                placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É –¥–ª—è –∫–æ–º–∞–Ω–¥—ã‚Ä¶ (Ctrl+Enter)"
                class="flex-1 bg-transparent border-none outline-none text-[14px] text-slate-100 placeholder-slate-700 resize-none min-h-[22px] max-h-[100px] leading-relaxed"></textarea>
      <button @click="sendTask()"
              :class="inputText.trim() ? 'bg-violet-600 hover:bg-violet-500 shadow-lg shadow-violet-600/25' : 'bg-[#1e1e32] text-slate-700 cursor-default'"
              class="w-8 h-8 rounded-xl flex items-center justify-center flex-shrink-0 transition-all active:scale-90">
        <svg class="w-3.5 h-3.5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
          <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
      </button>
    </div>
  </div><!-- end chat tab -->

  <!-- ‚îÄ‚îÄ‚îÄ Ideas tab ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div x-show="activeTab==='ideas'" class="flex-1 flex flex-col overflow-hidden">

    <!-- Idea input -->
    <div class="flex-shrink-0 border-b border-[#181828] bg-[#0d0d1a] px-4 py-3">
      <div class="flex items-end gap-2 bg-[#111120] border border-[#1e1e32] rounded-2xl px-4 py-2.5 transition-all focus-within:border-violet-500/40 focus-within:ring-1 focus-within:ring-violet-500/10">
        <textarea x-model="newIdeaText" x-ref="taIdea"
                  @keydown.ctrl.enter.prevent="submitIdea()"
                  @input="resizeTAIdea()" rows="1"
                  placeholder="–û–ø–∏—à–∏—Ç–µ –∏–¥–µ—é... (Ctrl+Enter) ‚Äî –∞–≥–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–¥—É—Ç –ø–ª–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
                  class="flex-1 bg-transparent border-none outline-none text-[14px] text-slate-100 placeholder-slate-700 resize-none min-h-[22px] max-h-[80px] leading-relaxed"></textarea>
        <button @click="submitIdea()"
                :class="newIdeaText.trim() ? 'bg-violet-600 hover:bg-violet-500 shadow-lg shadow-violet-600/25' : 'bg-[#1e1e32] text-slate-700 cursor-default'"
                class="w-8 h-8 rounded-xl flex items-center justify-center flex-shrink-0 transition-all active:scale-90">
          <svg class="w-3.5 h-3.5 text-white" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
            <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Ideas list -->
    <div class="flex-1 overflow-y-auto px-4 py-4 flex flex-col gap-3">

      <!-- Empty state -->
      <div x-show="ideas.length === 0"
           class="flex-1 flex flex-col items-center justify-center h-full" style="opacity:.15">
        <div class="text-5xl mb-3">üí°</div>
        <div class="text-[15px] font-bold">–ù–µ—Ç –∏–¥–µ–π</div>
        <div class="text-sm text-slate-400 mt-1">–í–≤–µ–¥–∏—Ç–µ –∏–¥–µ—é –≤—ã—à–µ ‚Äî –∞–≥–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–¥—É—Ç –ø–ª–∞–Ω</div>
      </div>

      <!-- Idea cards -->
      <template x-for="idea in ideas" :key="idea.id">
        <div class="bg-[#111120] border border-[#1e1e32] rounded-2xl overflow-hidden transition-all hover:border-[#252540]"
             :class="idea.status==='active' ? 'border-violet-500/30 bg-violet-500/5' : ''">

          <!-- Card header -->
          <div class="flex items-center justify-between px-4 pt-3.5 pb-2 gap-3">
            <div class="flex items-center gap-2 flex-wrap min-w-0">
              <span class="text-[10px] font-black tracking-wider uppercase px-2 py-1 rounded-full flex items-center gap-1.5 flex-shrink-0"
                    :class="{
                      'bg-amber-500/15 text-amber-400': idea.status==='planning',
                      'bg-violet-500/15 text-violet-300': idea.status==='planned',
                      'bg-emerald-500/15 text-emerald-400': idea.status==='active',
                      'bg-slate-700/50 text-slate-500': idea.status==='done',
                    }">
                <span x-show="idea.status==='planning'" class="w-2 h-2 rounded-full bg-amber-400 animate-pulse flex-shrink-0"></span>
                <span x-text="{planning:'–ê–Ω–∞–ª–∏–∑...', planned:'–ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É', active:'–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è', done:'–ì–æ—Ç–æ–≤–æ'}[idea.status]||idea.status"></span>
              </span>
              <span class="text-[10px] text-slate-700 flex-shrink-0" x-text="fmtDate(idea.created_at)"></span>
            </div>
            <button x-show="idea.status==='planned'"
                    @click="startIdea(idea.id)"
                    class="flex items-center gap-1.5 bg-violet-600 hover:bg-violet-500 text-white text-[12px] font-semibold px-3 py-1.5 rounded-xl transition-all active:scale-95 shadow-lg shadow-violet-600/25 flex-shrink-0">
              <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
              –í —Ä–∞–±–æ—Ç—É
            </button>
          </div>

          <!-- Idea text -->
          <div class="px-4 pb-2 text-[13.5px] text-slate-200 leading-relaxed">
            <p x-text="idea.content"></p>
          </div>

          <!-- Plan -->
          <div x-show="idea.plan_text" class="px-4 pb-4">
            <div class="mt-1 bg-[#0b0b14] border border-[#1e1e32] rounded-xl px-4 py-3">
              <div class="md-content" x-html="renderMd(idea.plan_text || '')"></div>
            </div>
          </div>

          <!-- Result -->
          <div x-show="idea.status==='done' && idea.result" class="px-4 pb-4">
            <div class="mt-1 bg-emerald-500/5 border border-emerald-500/20 rounded-xl px-4 py-3 text-[12px] text-emerald-300">
              <div class="font-bold mb-1 text-emerald-400">‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç</div>
              <p x-text="idea.result"></p>
            </div>
          </div>

        </div>
      </template>
    </div>
  </div><!-- end ideas tab -->

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ALPINE APP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
function app() {
  return {

    /* ‚îÄ‚îÄ‚îÄ Core state ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    wsLive:      false,
    clock:       '00:00:00',
    agents:      [],
    messages:    [],
    allTasks:    [],
    ideas:       [],
    inputText:   '',
    newIdeaText: '',
    micActive:   false,
    ws:          null,
    activeAgent: null,   // null = show all; string = agent key
    activeTab:   'chat', // 'chat' | 'ideas'

    /* ‚îÄ‚îÄ‚îÄ Agent catalog (static) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    AGENTS: {
      'manager':    { name:'Manager',    emoji:'üéØ', color:'#a78bfa', role:'–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä'   },
      'researcher': { name:'Researcher', emoji:'üîç', color:'#60a5fa', role:'–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å' },
      'writer':     { name:'Writer',     emoji:'‚úçÔ∏è',  color:'#4ade80', role:'–ê–≤—Ç–æ—Ä'         },
      'coder':      { name:'Coder',      emoji:'üíª', color:'#fbbf24', role:'–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫'   },
      'analyst':    { name:'Analyst',    emoji:'üìä', color:'#f87171', role:'–ê–Ω–∞–ª–∏—Ç–∏–∫'      },
      'ux-auditor': { name:'UX Auditor', emoji:'üé®', color:'#fb923c', role:'UI/UX'         },
      'site-coder': { name:'Site Coder', emoji:'üåê', color:'#22d3ee', role:'Frontend'      },
      'deployer':   { name:'Deployer',   emoji:'üöÄ', color:'#86efac', role:'DevOps'        },
    },
    STATUS_RU: { idle:'–°–≤–æ–±–æ–¥–µ–Ω', thinking:'–î—É–º–∞–µ—Ç', working:'–ê–∫—Ç–∏–≤–µ–Ω', done:'–ì–æ—Ç–æ–≤–æ' },

    /* ‚îÄ‚îÄ‚îÄ Computed getters ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    get filteredMessages() {
      if (this.activeAgent === null) return this.messages;
      return this.messages.filter(m => m.role === this.activeAgent || m.role === 'user');
    },
    get activeAgentObj() {
      if (!this.activeAgent) return null;
      return this.agents.find(a => a.key === this.activeAgent) || null;
    },

    /* ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    init() {
      this.buildAgents();
      this.connect();
      this.loadTasks();
      this.loadIdeas();
      this.startClock();
      this.initVoice();
      setInterval(() => this.loadTasks(), 10000);
    },

    buildAgents() {
      this.agents = Object.keys(this.AGENTS).map(k => ({
        key: k, status: 'idle', task: '', progress: 0,
      }));
    },

    /* ‚îÄ‚îÄ‚îÄ WebSocket ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    connect() {
      const proto = location.protocol === 'https:' ? 'wss' : 'ws';
      this.ws = new WebSocket(`${proto}://${location.host}/ws`);
      this.ws.onopen  = () => { this.wsLive = true; };
      this.ws.onclose = () => {
        this.wsLive = false;
        setTimeout(() => this.connect(), 3000);
      };
      this.ws.onmessage = e => {
        const d = JSON.parse(e.data);
        if (d.type === 'init') {
          d.agents.forEach(a => this.applyAgent(a));
          this.messages = d.history.map(m => ({ ...m }));
          this.$nextTick(() => this.scrollFeed());
          this.loadTasks();
        } else if (d.type === 'agents') {
          d.agents.forEach(a => this.applyAgent(a));
        } else if (d.type === 'chat') {
          this.messages.push({ ...d.message });
          this.$nextTick(() => this.scrollFeed());
        } else if (d.type === 'tasks_update') {
          this.loadTasks();
        } else if (d.type === 'ideas_update') {
          this.ideas = d.ideas || [];
        }
      };
    },

    applyAgent(a) {
      const idx = this.agents.findIndex(x => x.key === a.key);
      if (idx >= 0) {
        this.agents[idx] = { ...this.agents[idx], ...a };
      } else {
        this.agents.push({ key: a.key, status: 'idle', task: '', progress: 0, ...a });
      }
    },

    scrollFeed() {
      const f = this.$refs.feed;
      if (f) f.scrollTop = f.scrollHeight;
    },

    /* ‚îÄ‚îÄ‚îÄ Tasks ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    async loadTasks() {
      try {
        const r = await fetch('/api/tasks');
        const d = await r.json();
        this.allTasks = d.tasks || [];
      } catch(e) {}
    },

    fmtDate(iso) {
      if (!iso) return '';
      const d = new Date(iso);
      return d.toLocaleDateString('ru-RU', { day:'numeric', month:'short' })
           + ' ' + d.toLocaleTimeString('ru-RU', { hour:'2-digit', minute:'2-digit' });
    },

    /* ‚îÄ‚îÄ‚îÄ Ideas ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    async loadIdeas() {
      try {
        const r = await fetch('/api/ideas');
        const d = await r.json();
        this.ideas = d.ideas || [];
      } catch(e) {}
    },

    async submitIdea() {
      const txt = this.newIdeaText.trim();
      if (!txt) return;
      this.newIdeaText = '';
      this.$nextTick(() => {
        const ta = this.$refs.taIdea;
        if (ta) ta.style.height = 'auto';
      });
      try {
        await fetch('/api/ideas', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({content: txt}),
        });
      } catch(e) {}
    },

    async startIdea(id) {
      try {
        await fetch(`/api/ideas/${id}/start`, {method: 'POST'});
        this.activeTab = 'chat';
      } catch(e) {}
    },

    resizeTAIdea() {
      const ta = this.$refs.taIdea;
      if (!ta) return;
      ta.style.height = 'auto';
      ta.style.height = Math.min(ta.scrollHeight, 80) + 'px';
    },

    /* ‚îÄ‚îÄ‚îÄ Sidebar helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    lastMsgPreview(key) {
      const pool = key === null
        ? this.messages
        : this.messages.filter(m => m.role === key);
      if (!pool.length) return '';
      const last = pool[pool.length - 1];
      return (last.content || '').replace(/[#*`\n]/g, ' ').replace(/\s+/g, ' ').trim().slice(0, 42) + (last.content.length > 42 ? '‚Ä¶' : '');
    },
    lastMsgTime(key) {
      const pool = key === null
        ? this.messages
        : this.messages.filter(m => m.role === key);
      return pool.length ? pool[pool.length - 1].time || '' : '';
    },

    /* ‚îÄ‚îÄ‚îÄ Markdown renderer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    renderMd(raw) {
      if (!raw) return '';
      const cb = [];
      let t = raw.replace(/```[\w]*\n?([\s\S]*?)```/g, (_, c) => {
        cb.push(c.trim()); return `\x00${cb.length - 1}\x00`;
      });
      t = t.replace(/`([^`]+)`/g, (_, c) => `<code>${this.esc(c)}</code>`);
      t = t.replace(/^### (.+)$/gm, '<h3>$1</h3>')
           .replace(/^## (.+)$/gm,  '<h2>$1</h2>')
           .replace(/^# (.+)$/gm,   '<h1>$1</h1>');
      t = t.replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>')
           .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
           .replace(/\*(.+?)\*/g, '<em>$1</em>');
      t = t.replace(/^---+$/gm, '<hr>');
      t = t.replace(/^[-*]\s+(.+)$/gm, '<li>$1</li>')
           .replace(/(<li>.*<\/li>\n?)+/g, m => `<ul>${m}</ul>`);
      t = t.replace(/^>\s+(.+)$/gm, '<blockquote>$1</blockquote>');
      t = t.split(/\n{2,}/).map(c => {
        c = c.trim();
        if (!c) return '';
        if (/^<(h[1-3]|ul|ol|hr|blockquote|pre)/.test(c)) return c;
        return `<p>${c.replace(/\n/g, '<br>')}</p>`;
      }).join('');
      t = t.replace(/\x00(\d+)\x00/g, (_, i) => `<pre><code>${this.esc(cb[+i])}</code></pre>`);
      return t;
    },
    esc(s) { return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); },

    /* ‚îÄ‚îÄ‚îÄ Send task ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    sendTask() {
      const txt = this.inputText.trim();
      if (!txt || !this.ws || this.ws.readyState !== 1) return;
      this.ws.send(JSON.stringify({ type: 'task', content: txt }));
      this.inputText = '';
      this.$nextTick(() => {
        const ta = this.$refs.ta;
        if (ta) ta.style.height = 'auto';
      });
    },

    focusInput() {
      this.$nextTick(() => {
        const ta = this.$refs.ta;
        if (ta) ta.focus();
      });
    },

    resizeTA() {
      const ta = this.$refs.ta;
      if (!ta) return;
      ta.style.height = 'auto';
      ta.style.height = Math.min(ta.scrollHeight, 100) + 'px';
    },

    /* ‚îÄ‚îÄ‚îÄ Voice ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    _rec: null,
    _recRunning: false,
    initVoice() {
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SR) return;
      const rec = new SR();
      rec.lang = 'ru-RU'; rec.continuous = false; rec.interimResults = true;
      rec.onstart  = () => { this.micActive = true; };
      rec.onend    = () => { this.micActive = false; this._recRunning = false; };
      rec.onerror  = () => { this.micActive = false; this._recRunning = false; };
      rec.onresult = e => {
        let final = '', interim = '';
        for (let i = 0; i < e.results.length; i++) {
          if (e.results[i].isFinal) final   += e.results[i][0].transcript;
          else                      interim += e.results[i][0].transcript;
        }
        this.inputText = final || interim;
        this.$nextTick(() => this.resizeTA());
      };
      this._rec = rec;
    },
    toggleMic() {
      if (!this._rec) return;
      if (this._recRunning) { this._rec.stop(); this._recRunning = false; }
      else { try { this._rec.start(); this._recRunning = true; } catch(e) {} }
    },

    /* ‚îÄ‚îÄ‚îÄ Clock ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    startClock() {
      const tick = () => {
        const n = new Date();
        this.clock = [n.getHours(), n.getMinutes(), n.getSeconds()]
          .map(v => String(v).padStart(2, '0')).join(':');
        setTimeout(tick, 1000);
      };
      tick();
    },

  }; // end return
}
</script>
</body>
</html>
