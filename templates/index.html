<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agent Office HQ</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg:   #0f0f17;
  --bg2:  #13131e;
  --card: rgba(255,255,255,.04);
  --bdr:  rgba(255,255,255,.08);
  --text: #e2e8f0;
  --dim:  #64748b;
}

html, body { height: 100%; overflow: hidden; }
body {
  background: var(--bg); color: var(--text);
  font-family: 'Inter', system-ui, sans-serif;
  display: flex; flex-direction: column;
}
body::before {
  content: ''; position: fixed; inset: 0;
  background:
    radial-gradient(ellipse at 10% 20%, rgba(124,58,237,.07) 0%, transparent 55%),
    radial-gradient(ellipse at 90% 80%, rgba(56,189,248,.05) 0%, transparent 55%);
  pointer-events: none;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  height: 54px; background: rgba(15,15,23,.95);
  backdrop-filter: blur(12px); border-bottom: 1px solid var(--bdr);
  display: flex; align-items: center; padding: 0 24px;
  justify-content: space-between; flex-shrink: 0;
  position: relative; z-index: 10;
}
.logo {
  font-size: 15px; font-weight: 700;
  background: linear-gradient(135deg,#a78bfa,#38bdf8);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.hdr-right { display: flex; align-items: center; gap: 20px; }
.live {
  font-size: 12px; font-weight: 600; color: #4ade80;
  display: flex; align-items: center; gap: 7px;
}
.live::before {
  content: ''; width: 8px; height: 8px; border-radius: 50%;
  background: #4ade80; animation: livepulse 2s infinite;
}
.live.off { color: #fb7185; }
.live.off::before { background: #fb7185; animation: none; }
@keyframes livepulse {
  0%   { box-shadow: 0 0 0 0 rgba(74,222,128,.5); }
  70%  { box-shadow: 0 0 0 8px rgba(74,222,128,0); }
  100% { box-shadow: 0 0 0 0 rgba(74,222,128,0); }
}
.clock { font-size: 13px; font-weight: 500; color: var(--dim); font-variant-numeric: tabular-nums; }

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.main { flex: 1; display: flex; overflow: hidden; position: relative; z-index: 1; }

/* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
.workspace {
  width: 260px; flex-shrink: 0;
  border-right: 1px solid var(--bdr);
  padding: 16px 12px; overflow-y: auto;
  display: flex; flex-direction: column; gap: 8px;
}
.section-label {
  font-size: 9px; font-weight: 700; color: var(--dim);
  text-transform: uppercase; letter-spacing: 1.5px; padding: 0 2px;
}
.card-manager {
  background: var(--card); border: 1px solid rgba(167,139,250,.18);
  border-radius: 12px; padding: 12px 14px;
  display: flex; align-items: center; gap: 12px;
  transition: border-color .4s, box-shadow .4s;
}
.card-manager.working, .card-manager.thinking {
  border-color: rgba(167,139,250,.4);
  box-shadow: 0 0 16px rgba(167,139,250,.07);
}
.workers-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 7px; }
.card-worker {
  background: var(--card); border: 1px solid var(--bdr);
  border-radius: 12px; padding: 12px;
  transition: border-color .4s;
}
.card-worker.working { border-color: rgba(255,255,255,.15); }
.card-worker.done    { border-color: rgba(74,222,128,.3); }

.avatar    { width: 38px; height: 38px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 17px; flex-shrink: 0; }
.avatar-sm { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.badge {
  font-size: 9px; font-weight: 700; padding: 2px 7px;
  border-radius: 99px; text-transform: uppercase; letter-spacing: .5px; white-space: nowrap;
}
.badge.idle     { background: rgba(100,116,139,.15); color: var(--dim); }
.badge.thinking { background: rgba(167,139,250,.18); color: #a78bfa; animation: blink .8s infinite; }
.badge.working  { background: rgba(74,222,128,.14);  color: #4ade80; }
.badge.done     { background: rgba(74,222,128,.2);   color: #4ade80; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.35} }
.card-info { flex: 1; min-width: 0; }
.card-name { font-size: 13px; font-weight: 600; color: #fff; }
.card-role { font-size: 10px; color: var(--dim); margin-top: 1px; }
.card-task {
  font-size: 11px; color: var(--dim); margin-top: 5px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card-task.active { color: var(--text); }
.act-bar { height: 2px; background: rgba(255,255,255,.06); border-radius: 1px; margin-top: 8px; overflow: hidden; }
.act-fill { height: 100%; border-radius: 1px; transition: width .7s ease, background .4s; }
.act-fill.idle     { width: 0%; background: transparent; }
.act-fill.thinking { background: #a78bfa; animation: indeterminate 1.4s infinite; }
.act-fill.working  { background: #4ade80; }
.act-fill.done     { background: #4ade80; width: 100% !important; }
@keyframes indeterminate {
  0%   { transform: translateX(-100%); width: 55%; }
  100% { transform: translateX(220%);  width: 55%; }
}

/* ‚îÄ‚îÄ RESULTS PANEL ‚îÄ‚îÄ */
.chat-panel { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

.results {
  flex: 1; overflow-y: auto;
  padding: 16px 20px;
  display: flex; flex-direction: column; gap: 10px;
}

/* empty */
.empty {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 10px; opacity: .35; pointer-events: none; text-align: center;
}
.empty-icon  { font-size: 44px; }
.empty-title { font-size: 15px; font-weight: 600; }
.empty-sub   { font-size: 12px; color: var(--dim); }

/* User message */
.user-msg {
  align-self: flex-end;
  max-width: 72%;
  background: linear-gradient(135deg, #4f46e5, #7c3aed);
  color: #fff; border-radius: 14px 14px 4px 14px;
  padding: 10px 14px; font-size: 13px; line-height: 1.6;
  animation: msgin .2s ease;
}
.user-msg-meta { text-align: right; font-size: 10px; color: rgba(255,255,255,.45); margin-bottom: 4px; }

/* Plan bar (manager status) */
.plan-bar {
  display: flex; align-items: center; gap: 8px;
  background: rgba(167,139,250,.07); border: 1px solid rgba(167,139,250,.14);
  border-radius: 8px; padding: 8px 12px;
  font-size: 11px; color: var(--dim);
  animation: msgin .2s ease;
}
.plan-bar .plan-agent { color: #a78bfa; font-weight: 600; flex-shrink: 0; }
.plan-bar .plan-text  { flex: 1; }
.plan-bar .plan-time  { flex-shrink: 0; color: var(--dim); font-variant-numeric: tabular-nums; }

/* Result card */
.result-card {
  border-radius: 14px; border: 1px solid var(--bdr);
  overflow: hidden; background: rgba(255,255,255,.02);
  animation: msgin .25s ease;
  transition: border-color .3s;
}
.result-card:hover { border-color: rgba(255,255,255,.14); }

.rc-header {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 14px; cursor: pointer; user-select: none;
}
.rc-header:hover { background: rgba(255,255,255,.03); }

.rc-av {
  width: 28px; height: 28px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; flex-shrink: 0;
}
.rc-name  { font-size: 12px; font-weight: 700; flex-shrink: 0; }
.rc-preview {
  flex: 1; font-size: 12px; color: var(--dim);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  min-width: 0;
}
.rc-time   { font-size: 10px; color: var(--dim); flex-shrink: 0; font-variant-numeric: tabular-nums; }
.rc-toggle {
  font-size: 11px; color: var(--dim); flex-shrink: 0;
  transition: transform .25s; margin-left: 4px;
}
.result-card.open .rc-toggle { transform: rotate(180deg); }

.rc-body {
  max-height: 0; overflow: hidden;
  transition: max-height .35s ease, padding .25s;
  padding: 0 14px;
}
.result-card.open .rc-body {
  max-height: 4000px;
  padding: 0 14px 16px;
}

/* Markdown inside cards */
.rc-content {
  font-size: 13px; line-height: 1.7; color: var(--text);
  border-top: 1px solid var(--bdr); padding-top: 12px;
}
.rc-content strong { font-weight: 700; color: #fff; }
.rc-content em     { color: #94a3b8; }
.rc-content h1,.rc-content h2,.rc-content h3 {
  color: #fff; margin: 12px 0 6px; font-weight: 600;
}
.rc-content h1 { font-size: 16px; }
.rc-content h2 { font-size: 14px; }
.rc-content h3 { font-size: 13px; }
.rc-content p  { margin-bottom: 8px; }
.rc-content ul,.rc-content ol { padding-left: 18px; margin-bottom: 8px; }
.rc-content li { margin-bottom: 4px; }
.rc-content code {
  background: rgba(255,255,255,.1); padding: 1px 5px;
  border-radius: 3px; font-family: 'Fira Code','Courier New',monospace; font-size: 12px;
}
.rc-content pre {
  background: rgba(0,0,0,.5); border: 1px solid var(--bdr);
  border-radius: 8px; padding: 12px; margin: 8px 0; overflow-x: auto;
}
.rc-content pre code { background: none; padding: 0; font-size: 12px; }
.rc-content blockquote {
  border-left: 3px solid rgba(167,139,250,.4); padding-left: 12px;
  color: var(--dim); margin: 8px 0;
}
.rc-content hr { border: none; border-top: 1px solid var(--bdr); margin: 10px 0; }
.rc-content table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 12px; }
.rc-content th,.rc-content td { padding: 6px 10px; border: 1px solid var(--bdr); text-align: left; }
.rc-content th { background: rgba(255,255,255,.05); font-weight: 600; color: #fff; }

@keyframes msgin {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ‚îÄ‚îÄ INPUT ‚îÄ‚îÄ */
.input-area {
  border-top: 1px solid var(--bdr); padding: 12px 20px 14px;
  background: rgba(15,15,23,.7); backdrop-filter: blur(8px);
}
.input-row { display: flex; gap: 10px; align-items: flex-end; }
.input-box {
  flex: 1; background: rgba(255,255,255,.05); border: 1px solid var(--bdr);
  border-radius: 12px; padding: 10px 14px; color: var(--text);
  font-family: inherit; font-size: 14px; resize: none;
  min-height: 44px; max-height: 120px; line-height: 1.5;
  transition: border-color .2s; outline: none;
}
.input-box:focus { border-color: rgba(167,139,250,.4); }
.input-box::placeholder { color: var(--dim); }
.send-btn {
  width: 44px; height: 44px; border-radius: 12px;
  background: #4f46e5; border: none; cursor: pointer; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 17px; color: #fff; transition: background .2s, transform .1s;
}
.send-btn:hover  { background: #4338ca; }
.send-btn:active { transform: scale(.93); }
.input-hint { font-size: 10px; color: var(--dim); margin-top: 6px; }

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,.08); border-radius: 2px; }
</style>
</head>
<body>

<header>
  <div class="logo">üè¢ Agent Office HQ</div>
  <div class="hdr-right">
    <div class="live" id="liveEl">LIVE</div>
    <div class="clock" id="clockEl">00:00:00</div>
  </div>
</header>

<div class="main">

  <!-- SIDEBAR -->
  <aside class="workspace">
    <div class="section-label">–ú–µ–Ω–µ–¥–∂–µ—Ä</div>
    <div class="card-manager idle" id="card-manager">
      <div class="avatar" style="background:rgba(167,139,250,.15)">üéØ</div>
      <div class="card-info">
        <div style="display:flex;align-items:center;gap:7px;margin-bottom:2px;">
          <span class="card-name">Manager</span>
          <span class="badge idle" id="badge-manager">IDLE</span>
        </div>
        <div class="card-role">Orchestrator</div>
        <div class="card-task" id="task-manager">Waiting for task</div>
        <div class="act-bar"><div class="act-fill idle" id="fill-manager" style="width:0%"></div></div>
      </div>
    </div>

    <div class="section-label" style="margin-top:4px">–ö–æ–º–∞–Ω–¥–∞</div>
    <div class="workers-grid" id="workersGrid"></div>
  </aside>

  <!-- RESULTS -->
  <section class="chat-panel">
    <div class="results" id="results">
      <div class="empty" id="emptyState">
        <div class="empty-icon">üè¢</div>
        <div class="empty-title">–ö–æ–º–∞–Ω–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ</div>
        <div class="empty-sub">–ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç –µ—ë –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏</div>
      </div>
    </div>

    <div class="input-area">
      <div class="input-row">
        <textarea id="taskInput" class="input-box"
          placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞–∑–±–µ—Ä—ë—Ç –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç –ø–æ –∫–æ–º–∞–Ω–¥–µ‚Ä¶"
          rows="1"></textarea>
        <button class="send-btn" id="sendBtn" title="Ctrl+Enter">‚û§</button>
      </div>
      <div class="input-hint">Ctrl+Enter ¬∑ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–∞–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç —Ä–∞–±–æ—Ç—É</div>
    </div>
  </section>

</div>

<script>
/* ‚îÄ‚îÄ WORKERS ‚îÄ‚îÄ */
const WORKERS = [
  { key:'researcher', name:'Researcher', emoji:'üîç', color:'#38bdf8', bg:'rgba(56,189,248,.12)',  role:'Web Researcher' },
  { key:'writer',     name:'Writer',     emoji:'‚úçÔ∏è', color:'#4ade80', bg:'rgba(74,222,128,.12)',  role:'Content Writer' },
  { key:'coder',      name:'Coder',      emoji:'üíª', color:'#facc15', bg:'rgba(250,204,21,.12)',  role:'Code Engineer'  },
  { key:'analyst',    name:'Analyst',    emoji:'üìä', color:'#fb7185', bg:'rgba(251,113,133,.12)', role:'Data Analyst'   },
];
const AGENT_META = {
  manager:    { emoji:'üéØ', color:'#a78bfa', name:'Manager'    },
  researcher: { emoji:'üîç', color:'#38bdf8', name:'Researcher' },
  writer:     { emoji:'‚úçÔ∏è', color:'#4ade80', name:'Writer'     },
  coder:      { emoji:'üíª', color:'#facc15', name:'Coder'      },
  analyst:    { emoji:'üìä', color:'#fb7185', name:'Analyst'    },
};

document.getElementById('workersGrid').innerHTML = WORKERS.map(w => `
  <div class="card-worker idle" id="card-${w.key}">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:7px;">
      <div class="avatar-sm" style="background:${w.bg}">${w.emoji}</div>
      <div style="flex:1;min-width:0;">
        <div class="card-name" style="font-size:12px">${w.name}</div>
        <div class="card-role">${w.role}</div>
      </div>
      <span class="badge idle" id="badge-${w.key}">IDLE</span>
    </div>
    <div class="card-task" id="task-${w.key}">–°–≤–æ–±–æ–¥–µ–Ω</div>
    <div class="act-bar"><div class="act-fill idle" id="fill-${w.key}" style="width:0%"></div></div>
  </div>
`).join('');

/* ‚îÄ‚îÄ UPDATE CARD ‚îÄ‚îÄ */
const BADGE_LABELS = { idle:'IDLE', thinking:'–î–£–ú–ê–ï–¢', working:'–ê–ö–¢–ò–í–ï–ù', done:'–ì–û–¢–û–í–û' };

function updateCard(a) {
  const isManager = a.key === 'manager';
  const card  = document.getElementById(`card-${a.key}`);
  const badge = document.getElementById(`badge-${a.key}`);
  const task  = document.getElementById(`task-${a.key}`);
  const fill  = document.getElementById(`fill-${a.key}`);
  if (!card) return;
  card.className  = `card-${isManager ? 'manager' : 'worker'} ${a.status}`;
  badge.className = `badge ${a.status}`;
  badge.textContent = BADGE_LABELS[a.status] || a.status.toUpperCase();
  task.textContent  = a.task;
  task.className    = `card-task${a.status !== 'idle' ? ' active' : ''}`;
  fill.className    = `act-fill ${a.status}`;
  if (a.status === 'working' || a.status === 'done') fill.style.width = a.progress + '%';
  else if (a.status === 'idle') fill.style.width = '0%';
}

/* ‚îÄ‚îÄ MARKDOWN ‚îÄ‚îÄ */
function escHtml(s) {
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}
function md(text) {
  return text
    .replace(/```(\w*)\n?([\s\S]*?)```/g, (_,lang,code) =>
      `<pre><code>${escHtml(code.trim())}</code></pre>`)
    .replace(/`([^`]+)`/g, (_,c) => `<code>${escHtml(c)}</code>`)
    .replace(/^#{3}\s+(.+)$/gm, '<h3>$1</h3>')
    .replace(/^#{2}\s+(.+)$/gm, '<h2>$1</h2>')
    .replace(/^#{1}\s+(.+)$/gm, '<h1>$1</h1>')
    .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
    .replace(/\*(.+?)\*/g, '<em>$1</em>')
    .replace(/^---+$/gm, '<hr>')
    .replace(/^\|\s*(.+?)\s*\|/gm, m => m) // keep tables as-is (simple)
    .replace(/^[-*]\s+(.+)$/gm, '<li>$1</li>')
    .replace(/(<li>.*<\/li>\n?)+/g, m => `<ul>${m}</ul>`)
    .replace(/\n\n+/g, '</p><p>')
    .replace(/\n/g, '<br>');
}

/* ‚îÄ‚îÄ ADD MESSAGE ‚îÄ‚îÄ */
let cardCounter = 0;

function addMessage(msg) {
  const empty = document.getElementById('emptyState');
  if (empty) empty.remove();

  const wrap = document.getElementById('results');
  const role  = msg.role;
  const meta  = AGENT_META[role] || { emoji:'ü§ñ', color:'#888', name: msg.name || role };
  const color = msg.color || meta.color;
  const emoji = msg.emoji || meta.emoji;

  /* ‚îÄ‚îÄ User message ‚îÄ‚îÄ */
  if (role === 'user') {
    const el = document.createElement('div');
    el.innerHTML = `
      <div class="user-msg-meta">${msg.time}</div>
      <div class="user-msg">${escHtml(msg.content)}</div>`;
    el.style.cssText = 'display:flex;flex-direction:column;align-items:flex-end;animation:msgin .2s ease';
    wrap.appendChild(el);
    wrap.scrollTop = wrap.scrollHeight;
    return;
  }

  /* ‚îÄ‚îÄ Manager plan bar ‚îÄ‚îÄ */
  const isPlan = msg.content.startsWith('**Plan:**') || msg.content.startsWith('Plan:');
  if (role === 'manager' && isPlan) {
    const el = document.createElement('div');
    el.className = 'plan-bar';
    el.innerHTML = `
      <span class="plan-agent">üéØ Manager</span>
      <span class="plan-text">${md(msg.content)}</span>
      <span class="plan-time">${msg.time}</span>`;
    wrap.appendChild(el);
    wrap.scrollTop = wrap.scrollHeight;
    return;
  }

  /* ‚îÄ‚îÄ Agent result card ‚îÄ‚îÄ */
  const id = 'rc-' + (++cardCounter);
  const preview = msg.content.replace(/<[^>]*>|[#*`]/g,' ').replace(/\s+/g,' ').trim().slice(0,110);
  const hasMore = msg.content.length > 110;

  const el = document.createElement('div');
  el.className = 'result-card open'; // open by default so latest is visible
  el.style.borderColor = color + '30';
  el.innerHTML = `
    <div class="rc-header" onclick="toggleCard('${id}',this.parentElement)">
      <div class="rc-av" style="background:${color}22">${emoji}</div>
      <span class="rc-name" style="color:${color}">${escHtml(msg.name || meta.name)}</span>
      <span class="rc-preview">${escHtml(preview)}${hasMore ? '‚Ä¶' : ''}</span>
      <span class="rc-time">${msg.time}</span>
      <span class="rc-toggle">‚ñæ</span>
    </div>
    <div class="rc-body" id="${id}">
      <div class="rc-content">${md(msg.content)}</div>
    </div>`;

  // Collapse previously open cards
  wrap.querySelectorAll('.result-card.open').forEach(c => {
    c.classList.remove('open');
    const toggle = c.querySelector('.rc-toggle');
    if (toggle) toggle.style.transform = '';
  });

  wrap.appendChild(el);
  wrap.scrollTop = wrap.scrollHeight;
}

function toggleCard(id, card) {
  const body   = document.getElementById(id);
  const toggle = card.querySelector('.rc-toggle');
  const isOpen = card.classList.contains('open');
  card.classList.toggle('open', !isOpen);
  if (toggle) toggle.style.transform = isOpen ? '' : 'rotate(180deg)';
}

/* ‚îÄ‚îÄ WEBSOCKET ‚îÄ‚îÄ */
let ws;

function connect() {
  ws = new WebSocket(`${location.protocol === 'https:' ? 'wss' : 'ws'}://${location.host}/ws`);
  const liveEl = document.getElementById('liveEl');

  ws.onopen  = () => { liveEl.textContent='LIVE';    liveEl.className='live'; };
  ws.onclose = () => { liveEl.textContent='OFFLINE'; liveEl.className='live off'; setTimeout(connect,3000); };

  ws.onmessage = e => {
    const data = JSON.parse(e.data);
    if (data.type === 'init') {
      data.agents.forEach(updateCard);
      data.history.forEach(addMessage);
    } else if (data.type === 'agents') {
      data.agents.forEach(updateCard);
    } else if (data.type === 'chat') {
      addMessage(data.message);
    }
  };
}

/* ‚îÄ‚îÄ SEND ‚îÄ‚îÄ */
function sendTask() {
  const input = document.getElementById('taskInput');
  const text  = input.value.trim();
  if (!text || !ws || ws.readyState !== 1) return;
  ws.send(JSON.stringify({ type:'task', content:text }));
  input.value = '';
  input.style.height = 'auto';
}

document.getElementById('sendBtn').addEventListener('click', sendTask);
document.getElementById('taskInput').addEventListener('keydown', e => {
  if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) { e.preventDefault(); sendTask(); }
  setTimeout(() => {
    const el = document.getElementById('taskInput');
    el.style.height = 'auto';
    el.style.height = Math.min(el.scrollHeight, 120) + 'px';
  });
});

/* ‚îÄ‚îÄ CLOCK ‚îÄ‚îÄ */
(function tick() {
  const n = new Date();
  document.getElementById('clockEl').textContent =
    [n.getHours(),n.getMinutes(),n.getSeconds()].map(v=>String(v).padStart(2,'0')).join(':');
  setTimeout(tick,1000);
})();

connect();
</script>
</body>
</html>
